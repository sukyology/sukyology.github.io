<!doctype html><html lang=ko-kr>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>datasource-proxy를 활용해 n+1 쿼리 방지하기 | sukyology</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="기존 상황 n+1 쿼리를 db 호출 로그를 통해 육안으로 확인하고 있었습니다.
목적 테스트를 통해서 n+1 쿼리를 빠르게 방지할 수 있는 방법을 찾고 싶습니다.
해결 방안 datasource-proxy 라이브러리를 통해 실행한 쿼리문의 개수를 불러와서 예상한 쿼리문의 수와 맞는지 비교합니다.
설정 build.gradle.kts에 다음과 같은 내용을 dependencies에 추가합니다.
implementation(&#34;net.ttddyy:datasource-proxy:1.7&#34;) 그리고 spring-boot에서 proxybean을 생성하게 위해서 BeanPostProcessor를 하나 만들어서 등록해줍니다. 테스트에서만 사용할 거라 적절한 @Profile도 붙여줍니다.
@Configuration @Profile(&#34;test&#34;) class DatasourceProxyBeanPostProcessor : BeanPostProcessor { override fun postProcessAfterInitialization(bean: Any, beanName: String): Any?">
<meta name=generator content="Hugo 0.88.1">
<meta name=ROBOTS content="INDEX, FOLLOW">
<link rel=stylesheet href=/ananke/css/main.min.css>
<meta property="og:title" content="datasource-proxy를 활용해 n+1 쿼리 방지하기">
<meta property="og:description" content="기존 상황 n+1 쿼리를 db 호출 로그를 통해 육안으로 확인하고 있었습니다.
목적 테스트를 통해서 n+1 쿼리를 빠르게 방지할 수 있는 방법을 찾고 싶습니다.
해결 방안 datasource-proxy 라이브러리를 통해 실행한 쿼리문의 개수를 불러와서 예상한 쿼리문의 수와 맞는지 비교합니다.
설정 build.gradle.kts에 다음과 같은 내용을 dependencies에 추가합니다.
implementation(&#34;net.ttddyy:datasource-proxy:1.7&#34;) 그리고 spring-boot에서 proxybean을 생성하게 위해서 BeanPostProcessor를 하나 만들어서 등록해줍니다. 테스트에서만 사용할 거라 적절한 @Profile도 붙여줍니다.
@Configuration @Profile(&#34;test&#34;) class DatasourceProxyBeanPostProcessor : BeanPostProcessor { override fun postProcessAfterInitialization(bean: Any, beanName: String): Any?">
<meta property="og:type" content="article">
<meta property="og:url" content="https://sukyology.github.io/posts/test_with_ds_proxy/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-10T08:27:27+09:00">
<meta property="article:modified_time" content="2021-09-10T08:27:27+09:00">
<meta itemprop=name content="datasource-proxy를 활용해 n+1 쿼리 방지하기">
<meta itemprop=description content="기존 상황 n+1 쿼리를 db 호출 로그를 통해 육안으로 확인하고 있었습니다.
목적 테스트를 통해서 n+1 쿼리를 빠르게 방지할 수 있는 방법을 찾고 싶습니다.
해결 방안 datasource-proxy 라이브러리를 통해 실행한 쿼리문의 개수를 불러와서 예상한 쿼리문의 수와 맞는지 비교합니다.
설정 build.gradle.kts에 다음과 같은 내용을 dependencies에 추가합니다.
implementation(&#34;net.ttddyy:datasource-proxy:1.7&#34;) 그리고 spring-boot에서 proxybean을 생성하게 위해서 BeanPostProcessor를 하나 만들어서 등록해줍니다. 테스트에서만 사용할 거라 적절한 @Profile도 붙여줍니다.
@Configuration @Profile(&#34;test&#34;) class DatasourceProxyBeanPostProcessor : BeanPostProcessor { override fun postProcessAfterInitialization(bean: Any, beanName: String): Any?"><meta itemprop=datePublished content="2021-09-10T08:27:27+09:00">
<meta itemprop=dateModified content="2021-09-10T08:27:27+09:00">
<meta itemprop=wordCount content="323">
<meta itemprop=keywords content="kotlin,spring,test,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="datasource-proxy를 활용해 n+1 쿼리 방지하기">
<meta name=twitter:description content="기존 상황 n+1 쿼리를 db 호출 로그를 통해 육안으로 확인하고 있었습니다.
목적 테스트를 통해서 n+1 쿼리를 빠르게 방지할 수 있는 방법을 찾고 싶습니다.
해결 방안 datasource-proxy 라이브러리를 통해 실행한 쿼리문의 개수를 불러와서 예상한 쿼리문의 수와 맞는지 비교합니다.
설정 build.gradle.kts에 다음과 같은 내용을 dependencies에 추가합니다.
implementation(&#34;net.ttddyy:datasource-proxy:1.7&#34;) 그리고 spring-boot에서 proxybean을 생성하게 위해서 BeanPostProcessor를 하나 만들어서 등록해줍니다. 테스트에서만 사용할 거라 적절한 @Profile도 붙여줍니다.
@Configuration @Profile(&#34;test&#34;) class DatasourceProxyBeanPostProcessor : BeanPostProcessor { override fun postProcessAfterInitialization(bean: Any, beanName: String): Any?">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TDR87VQY72"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-TDR87VQY72',{anonymize_ip:!1})}</script>
</head>
<body class="ma0 avenir bg-near-white">
<header>
<div class=bg-black>
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/ class="f3 fw2 hover-white no-underline white-90 dib">
sukyology
</a>
<div class="flex-l items-center">
<ul class="pl0 mr3">
<li class="list f5 f4-ns fw4 dib pr3">
<a class="hover-white no-underline white-90" href=/hobby/ title="hobby page">
hobby
</a>
</li>
<li class="list f5 f4-ns fw4 dib pr3">
<a class="hover-white no-underline white-90" href=/posts/ title="programming page">
programming
</a>
</li>
</ul>
<a href=https://twitter.com/sukyology target=_blank class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
<a href=https://github.com/sukyology target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel=noopener aria-label="follow on Github——Opens in a new window"><svg height="32" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
</div>
</div>
</nav>
</div>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3" style=word-break:break-all>
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
PROGRAMMING
</aside>
<div id=sharing class=mt3>
<a href="https://www.facebook.com/sharer.php?u=https://sukyology.github.io/posts/test_with_ds_proxy/" class="facebook no-underline" aria-label="share on Facebook"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765 50.32h6.744V33.998h4.499l.596-5.624h-5.095l.007-2.816c0-1.466.14-2.253 2.244-2.253h2.812V17.68h-4.5c-5.405.0-7.307 2.729-7.307 7.317v3.377h-3.369v5.625h3.369V50.32zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</a>
<a href="https://twitter.com/share?url=https://sukyology.github.io/posts/test_with_ds_proxy/&text=datasource-proxy%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%b4%20n+1%20%ec%bf%bc%eb%a6%ac%20%eb%b0%a9%ec%a7%80%ed%95%98%ea%b8%b0" class="twitter no-underline" aria-label="share on Twitter"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://sukyology.github.io/posts/test_with_ds_proxy/&title=datasource-proxy%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%b4%20n+1%20%ec%bf%bc%eb%a6%ac%20%eb%b0%a9%ec%a7%80%ed%95%98%ea%b8%b0" class="linkedin no-underline" aria-label="share on LinkedIn"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
</div>
<h1 class="f1 athelas mt3 mb1">datasource-proxy를 활용해 n+1 쿼리 방지하기</h1>
<time class="f6 mv4 dib tracked" datetime=2021-09-10T08:27:27+09:00>September 10, 2021</time>
</header>
<div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h2 id=기존-상황>기존 상황</h2>
<p>n+1 쿼리를 db 호출 로그를 통해 육안으로 확인하고 있었습니다.</p>
<h2 id=목적>목적</h2>
<p>테스트를 통해서 n+1 쿼리를 빠르게 방지할 수 있는 방법을 찾고 싶습니다.</p>
<h2 id=해결-방안>해결 방안</h2>
<p>datasource-proxy 라이브러리를 통해 실행한 쿼리문의 개수를 불러와서 예상한 쿼리문의 수와 맞는지 비교합니다.</p>
<h2 id=설정>설정</h2>
<p><code>build.gradle.kts</code>에 다음과 같은 내용을 <code>dependencies</code>에 추가합니다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml> <span style=color:#ae81ff>implementation(&#34;net.ttddyy:datasource-proxy:1.7&#34;)</span>
</code></pre></div><p>그리고 spring-boot에서 proxybean을 생성하게 위해서 BeanPostProcessor를 하나 만들어서 등록해줍니다.
테스트에서만 사용할 거라 적절한 <code>@Profile</code>도 붙여줍니다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#a6e22e>@Configuration</span>
<span style=color:#a6e22e>@Profile</span>(<span style=color:#e6db74>&#34;test&#34;</span>)
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DatasourceProxyBeanPostProcessor</span> : BeanPostProcessor {
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>postProcessAfterInitialization</span>(bean: Any, beanName: String): Any? {
        <span style=color:#66d9ef>if</span> (bean <span style=color:#66d9ef>is</span> DataSource <span style=color:#f92672>&amp;&amp;</span> bean <span style=color:#f92672>!is</span> ProxyDataSource) {
            <span style=color:#75715e>// Instead of directly returning a less specific datasource bean
</span><span style=color:#75715e></span>            <span style=color:#75715e>// (e.g.: HikariDataSource -&gt; DataSource), return a proxy object.
</span><span style=color:#75715e></span>            <span style=color:#75715e>// See following links for why:
</span><span style=color:#75715e></span>            <span style=color:#75715e>//   https://stackoverflow.com/questions/44237787/how-to-use-user-defined-database-proxy-in-datajpatest
</span><span style=color:#75715e></span>            <span style=color:#75715e>//   https://gitter.im/spring-projects/spring-boot?at=5983602d2723db8d5e70a904
</span><span style=color:#75715e></span>            <span style=color:#75715e>//   http://blog.arnoldgalovics.com/2017/06/26/configuring-a-datasource-proxy-in-spring-boot/
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>val</span> factory = ProxyFactory(bean)
            factory.isProxyTargetClass = <span style=color:#66d9ef>true</span>
            factory.addAdvice(ProxyDataSourceInterceptor(bean))
            <span style=color:#66d9ef>return</span> factory.proxy
        }
        <span style=color:#66d9ef>return</span> bean
    }

    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>postProcessBeforeInitialization</span>(bean: Any, beanName: String): Any? {
        <span style=color:#66d9ef>return</span> bean
    }

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProxyDataSourceInterceptor</span>(dataSource: DataSource?) : MethodInterceptor {
        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>val</span> dataSource: DataSource

        <span style=color:#a6e22e>@Throws</span>(Throwable<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>)
        <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>operator</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>invoke</span>(invocation: MethodInvocation): Any? {
            <span style=color:#66d9ef>val</span> proxyMethod = ReflectionUtils.findMethod(
                dataSource<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>.java,
                invocation.method.name
            )
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>if</span> (proxyMethod <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
                proxyMethod.invoke(dataSource, *invocation.arguments)
            } <span style=color:#66d9ef>else</span> invocation.proceed()
        }

        <span style=color:#66d9ef>init</span> {
            <span style=color:#66d9ef>val</span> listener = ChainListener()
            <span style=color:#66d9ef>val</span> loggingListener = SLF4JQueryLoggingListener()
            listener.addListener(loggingListener)
            listener.addListener(DataSourceQueryCountListener())
            <span style=color:#66d9ef>this</span>.dataSource = ProxyDataSourceBuilder.create(dataSource)
                .name(<span style=color:#e6db74>&#34;MyDS&#34;</span>)
                .multiline()
                .listener(listener)
                .build()
        }
    }
}
</code></pre></div><h2 id=예제>예제</h2>
<p>사용법은 간단합니다. 저도 자세한 사용법은 모르지만
<code>QueryCountHolder</code>를 통해서 쿼리가 날라간 횟수를 조회가 가능하고
<code>clear()</code> 함수를 통해서 초기화가 가능하기 때무네 이를 적절히 사용해서
쿼리의 호출 횟수가 예상과 일치하는지 테스트할 수 있습니다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin> <span style=color:#a6e22e>@Test</span>
    <span style=color:#a6e22e>@Transactional</span>
    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>dbDataProxy</span>() {
        teamRepository.save(Team(
        ).apply {
            players.add(Player(<span style=color:#e6db74>&#34;돌다리&#34;</span>).also { <span style=color:#66d9ef>it</span>.team = <span style=color:#66d9ef>this</span> })
            players.add(Player().also { <span style=color:#66d9ef>it</span>.team = <span style=color:#66d9ef>this</span> })
            players.add(Player().also { <span style=color:#66d9ef>it</span>.team = <span style=color:#66d9ef>this</span> })
        })

        <span style=color:#66d9ef>val</span> insertCount = QueryCountHolder.getGrandTotal().insert

        insertCount shouldBe <span style=color:#ae81ff>4</span>

        TestTransaction.flagForCommit()
        TestTransaction.end()
        TestTransaction.start()

        <span style=color:#66d9ef>val</span> team = teamRepository.findAll().first()
        <span style=color:#66d9ef>val</span> playerNames = team.players.map { <span style=color:#66d9ef>it</span>.name }

        <span style=color:#66d9ef>val</span> queryCount = QueryCountHolder.getGrandTotal().select
        
        queryCount shouldBe <span style=color:#ae81ff>1</span> <span style=color:#75715e>// !!!!!!!!!!!!error should be 2 !!!!!!!!!!!!!!
</span><span style=color:#75715e></span>    }
</code></pre></div><h2 id=결론>결론</h2>
<p>단순히 n+1쿼리를 detecting 하는 것 외에도 로그라던지, 여러가지로 활용할 여지가 있습니다.
우선, 저도 깊게 알아보지 않았으므로 bibliography에 링크를 첨부하도록 하겠습니다.</p>
<h2 id=bibliography>Bibliography</h2>
<p><a href=https://vladmihalcea.com/the-best-way-to-log-jdbc-statements/>jdbc 로그 최선책</a></p>
<p><a href=https://github.com/ttddyy/datasource-proxy>datasource-proxy 깃헙 리파지토리</a></p>
<p><a href=http://ttddyy.github.io/datasource-proxy/docs/current/user-guide/>공식 문서</a></p>
<ul class=pa0>
<li class=list>
<a href=/tags/kotlin class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">kotlin</a>
</li>
<li class=list>
<a href=/tags/spring class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">spring</a>
</li>
<li class=list>
<a href=/tags/test class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">test</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<div class=utterances></div>
<script src=https://utteranc.es/client.js repo=sukyology/sukyology.github.io issue-term=pathname label=blog-comments theme=github-light crossorigin=anonymous async></script>
<aside class="w-30-l mt6-l">
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3"></p>
<ul class="pa0 list">
<li class=mb2>
<a href=/posts/spring_integration_test_ex2/>kotlin-spring 간단한 통합 테스트 설정 2</a>
</li>
<li class=mb2>
<a href=/posts/spring_integration_test_ex/>kotlin-spring 간단한 통합 테스트 설정</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://sukyology.github.io/>
&copy; sukyology 2021
</a>
<div>
<a href=https://twitter.com/sukyology target=_blank class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
<a href=https://github.com/sukyology target=_blank class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel=noopener aria-label="follow on Github——Opens in a new window"><svg height="32" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
<span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" width="8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</span></a>
</div>
</div>
</footer>
</body>
</html>